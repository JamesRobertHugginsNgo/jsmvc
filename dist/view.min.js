"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.jsmvc||(window.jsmvc={}),jsmvc.viewPropertyDescriptors={definedBy_viewPropertyDescriptors:{value:!0},attributeData:{writable:!0},defineAttributes:{value:function(e){return this.attributeData=e,this}},renderAttributesPromise:{writable:!0},renderAttributes:{value:function(e){function t(){if(e){Array.isArray(e)||(e=[e]);var r=[];return e.forEach(function(e){var t=e(l);t instanceof Promise&&r.push(t)}),0!==r.length?Promise.all(r):void 0}}var l=this,r=function r(e,i){if("function"==typeof e)return r(e(),i);if("object"===_typeof(e)&&null!==e){if(e instanceof Promise)return e.then(function(e){return r(e,i)});if(Array.isArray(e)){var n=[];return e.forEach(function(e){var t=r(e,i);t instanceof Promise&&n.push(t)}),0!==n.length?Promise.all(n):void 0}var t=[];for(var o in e){var s=r(e[o],o);s instanceof Promise&&t.push(s)}return 0!==t.length?Promise.all(t):void 0}if("boolean"==typeof e&&e)return r("",i);if(i)if(null!=e&&!1!==e){var a=String(e);l.hasAttribute(i)&&l.getAttribute(i)===a||l.setAttribute(i,a)}else l.hasAttribute(i)&&l.removeAttribute(i)}(this.attributeData,null);if(r instanceof Promise)this.renderAttributesPromise=r.then(function(){return t()}).then(function(){return l});else{var i=t();i instanceof Promise?this.renderAttributesPromise=i.then(function(){return l}):this.renderAttributesPromise=Promise.resolve(this)}return this}},childElementData:{writable:!0},defineChildElements:{value:function(e){return this.childElementData=e,this}},renderChildElementsPromise:{writable:!0},renderChildElements:{value:function(t,e){for(var i=this,r=!(1<arguments.length&&void 0!==e)||e;this.firstChild;)this.removeChild(this.firstChild);var n=document.createDocumentFragment(),o=function i(e,n){if("function"==typeof e)return i(e(),n);if("object"===_typeof(e)&&!(e instanceof HTMLElement||e instanceof Text)){if(null===e)return void n.parentNode.removeChild(n);if(e instanceof Promise)return e.then(function(e){return i(e,n)});if(Array.isArray(e)){var o=[];return e.forEach(function(e){var t=n.parentNode.insertBefore(document.createTextNode(" "),n),r=i(e,t);r instanceof Promise&&o.push(r)}),n.parentNode.removeChild(n),0!==o.length?Promise.all(o):void 0}var t=[];for(var r in e){var s=n.parentNode.insertBefore(document.createTextNode(" "),n),a=i(e[r],s);a instanceof Promise&&t.push(a)}return n.parentNode.removeChild(n),0!==t.length?Promise.all(t):void 0}if("boolean"==typeof e||"number"==typeof e||"string"==typeof e){var l=document.createElement("div");l.innerHTML=String(e);for(var u=[],c=0,f=l.childNodes.length;c<f;c++)u.push(l.childNodes[c]);return i(u,n)}(e instanceof HTMLElement||e instanceof Text)&&n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)}(this.childElementData,n.appendChild(document.createTextNode(" ")));this.appendChild(n);function s(){function e(){if(t){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(e){var t=e(i);t instanceof Promise&&r.push(t)}),0!==r.length?Promise.all(r):void 0}}return o instanceof Promise?o.then(function(){return e()}):e()}var a=[];if(r){var l=this.childElementData;(l=Array.isArray(l)?l.slice():[l]).forEach(function(e){e.definedBy_viewPropertyDescriptors&&a.push(e.render().renderPromise)})}if(0!==a.length)this.renderChildElementsPromise=Promise.all(a).then(function(){return s()}).then(function(){return i});else{var u=s();u instanceof Promise?this.renderChildElementsPromise=u.then(function(){return i}):this.renderChildElementsPromise=Promise.resolve(this)}return this}},renderPromise:{writable:!0},render:{value:function(e,t){function r(){if(e){Array.isArray(e)||(e=[e]);var r=[];return e.forEach(function(e){var t=e(i);t instanceof Promise&&r.push(t)}),0!==r.length?Promise.all(r):void 0}}var i=this,n=!(1<arguments.length&&void 0!==t)||t,o=[];if(this.attributeData&&o.push(this.renderAttributes().renderAttributesPromise),this.childElementData&&o.push(this.renderChildElements(null,n).renderChildElementsPromise),0!==o.length)this.renderPromise=Promise.all(o).then(function(){return r()}).then(function(){return i});else{var s=r();s instanceof Promise?this.renderPromise=s.then(function(){return i}):this.renderPromise=Promise.resolve(this)}return this}},cleanUpHandler:{writable:!0},cleanUp:{value:function(){for(var e=0,t=this.childNodes.length;e<t;e++){var r=this.childNodes[e];r.definedBy_viewPropertyDescriptors&&r.cleanUp()}this.cleanUpHandler&&this.cleanUpHandler.call(this),this.definedBy_eventfulPropertyDescriptors&&this.triggerEvents("cleanUp")}}},jsmvc.view=function(e,t,r,i){if("string"==typeof e&&(e=document.createElement(e)),jsmvc.eventful&&(e=jsmvc.eventful(e)),e.firstChild){for(var n,o=[],s=0,a=e.childNodes.length;s<a;s++)o.push(e.childNodes[s]);if(0<o.length)(n=r=Array.isArray(r)?r.slice():null==r?[]:[r]).unshift.apply(n,o)}return e.definedBy_viewPropertyDescriptors||Object.defineProperties(e,jsmvc.viewPropertyDescriptors),e.defineAttributes(t).defineChildElements(r).render(i,!1)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"].forEach(function(n){jsmvc.view[n]=function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=jsmvc).view.apply(e,[n].concat(r))}});